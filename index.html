<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
            rel="stylesheet"
        />

        <title>SPS Links</title>

        <link
            rel="icon"
            href="https://www.stpaulsschool.org.uk/wp-content/uploads/2019/05/St-Pauls-Logo-150x150.png"
            sizes="32x32"
        />
        <link
            rel="icon"
            href="https://www.stpaulsschool.org.uk/wp-content/uploads/2019/05/St-Pauls-Logo-300x300.png"
            sizes="192x192"
        />
        <link
            rel="apple-touch-icon"
            href="https://www.stpaulsschool.org.uk/wp-content/uploads/2019/05/St-Pauls-Logo-300x300.png"
        />
        <link rel="stylesheet" href="style.css" />
        <!-- <script
            src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous"
        ></script> -->
    </head>
    <body>
        <div class="background">
            <div class="main">
                <div class="container">
                    <div class="links"></div>
                </div>
                <div class="container">
                    <p>hi</p>
                </div>
            </div>
        </div>
        <script>
            function getFactorPairs(num) {
                let pairs = [];
                for (let i = 1; i <= Math.sqrt(num); i++) {
                    if (num % i === 0) {
                        let pair = [i, num / i];
                        pairs.push(pair);
                    }
                }
                return pairs;
            }

            function estimateGridTemplate(num) {
                result = getFactorPairs(num);
                return result[result.length - 1];
            }

            function createLinkElement(link) {
                let item = document.createElement('a');
                item.classList.add('item');
                item.href = link.link;
                item.target = '_blank';

                let img = document.createElement('img');
                img.src = link.logo;
                item.appendChild(img);

                let text = document.createElement('p');
                text.innerText = link.name;
                item.appendChild(text);

                return item;
            }

            let links = [
                {
                    name: 'Classroom',
                    link: 'https://accounts.google.com/v3/signin/identifier?continue=https%3A%2F%2Fclassroom.google.com%2F&flowEntry=ServiceLogin&flowName=GlifWebSignIn&hd=stpaulsschool.org.uk',
                    logo: 'https://edu.google.com/images/svg/gsuite-icons/classroom.svg',
                },
                {
                    name: 'Drive',
                    link: 'https://accounts.google.com/v3/signin/identifier?continue=https%3A%2F%2Fdrive.google.com%2F&flowEntry=ServiceLogin&flowName=GlifWebSignIn&hd=stpaulsschool.org.uk',
                    logo: 'https://edu.google.com/images/svg/gsuite-icons/drive.svg',
                },
                // {
                //     name: 'To do',
                //     link: 'https://accounts.google.com/v3/signin/identifier?continue=https%3A%2F%2Fclassroom.google.com%2Fa%2Fnot-turned-in%2Fall&flowEntry=ServiceLogin&flowName=GlifWebSignIn&hd=stpaulsschool.org.uk',
                //     logo: 'https://edu.google.com/images/svg/gsuite-icons/classroom.svg',
                // },
                {
                    name: 'Calendar',
                    link: 'https://accounts.google.com/v3/signin/identifier?continue=https%3A%2F%2Fcalendar.google.com%2Fcalendar%2Fu%2F0%2Fr%2Fweek&flowEntry=ServiceLogin&flowName=GlifWebSignIn&hd=stpaulsschool.org.uk',
                    logo: 'https://edu.google.com/images/svg/gsuite-icons/calendar.svg',
                },
                {
                    name: 'Docs',
                    link: 'https://accounts.google.com/v3/signin/identifier?continue=https%3A%2F%2Fdocs.google.com%2F&flowEntry=ServiceLogin&flowName=GlifWebSignIn&hd=stpaulsschool.org.uk',
                    logo: 'https://edu.google.com/images/svg/gsuite-icons/docs.svg',
                },
                {
                    name: 'Slides',
                    link: 'https://accounts.google.com/v3/signin/identifier?continue=https%3A%2F%2Fdocs.google.com%2Fpresentation%2F&flowEntry=ServiceLogin&flowName=GlifWebSignIn&hd=stpaulsschool.org.uk',
                    logo: 'https://edu.google.com/images/svg/gsuite-icons/slides.svg',
                },
                {
                    name: 'Sheets',
                    link: 'https://accounts.google.com/v3/signin/identifier?continue=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2F&flowEntry=ServiceLogin&flowName=GlifWebSignIn&hd=stpaulsschool.org.uk',
                    logo: 'https://edu.google.com/images/svg/gsuite-icons/sheets.svg',
                },
                {
                    name: 'Intranet',
                    link: 'https://intranet.stpaulsschool.org.uk/',
                    logo: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSpQrLMdOmPv-5P8m0lCZKW5iThTyVaTMLShg&s',
                },
                {
                    name: 'Lunch Menu',
                    link: 'https://intranet.stpaulsschool.org.uk/catering',
                    logo: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSpQrLMdOmPv-5P8m0lCZKW5iThTyVaTMLShg&s',
                },
                {
                    name: 'Outlook',
                    link: 'https://webmail.stpaulsschool.org.uk/owa/',
                    logo: 'https://upload.wikimedia.org/wikipedia/commons/d/df/Microsoft_Office_Outlook_%282018%E2%80%93present%29.svg',
                },
                {
                    name: 'SOCS',
                    link: 'https://www.socscms.com/login/232/pupil',
                    logo: 'croppedsocslogo.png',
                },
                {
                    name: 'Pupil Portal',
                    link: 'https://pupils.stpaulsschool.org.uk/',
                    logo: 'https://www.stpaulsschool.org.uk/wp-content/uploads/2019/05/St-Pauls-Logo-300x300.png',
                },
                {
                    name: 'Library Catalogue',
                    link: 'https://webopac.stpaulsschool.org.uk/cirqa-web-app/',
                    logo: 'https://cirqa.co.uk/wp-content/uploads/Book-heartturqtext.png',
                },
                {
                    name: 'Onshape',
                    link: 'https://sps.onshape.com/',
                    logo: 'https://play-lh.googleusercontent.com/yAS9WJJnjlCx77RxIvJSssrixhCdUxnBlM3CuPnQpl8QI3Ez19KreBL4xREc1gtmK_Y',
                },
                {
                    name: 'Foldr',
                    link: 'https://foldr.stpaulsschool.org.uk/',
                    logo: 'https://foldr.com/media/2023/05/cropped-Foldr-Icon-Main.png',
                },
                {
                    name: '',
                    link: '',
                    logo: '',
                },
                {
                    name: '',
                    link: '',
                    logo: '',
                },
            ];

            let body = document.querySelector('body');
            let linkGrid = document.querySelector('.links');
            let gridTemplate = estimateGridTemplate(links.length);

            function updateScreen() {
                let rows;
                let cols;
                if (screen.availHeight > screen.availWidth) {
                    rows = Math.max(...gridTemplate);
                    cols = Math.min(...gridTemplate);
                } else {
                    rows = Math.min(...gridTemplate);
                    cols = Math.max(...gridTemplate);
                }
                linkGrid.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
                linkGrid.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
            }

            updateScreen();
            document.addEventListener('resize', updateScreen);

            for (let i = 0; i < links.length; i++) {
                const link = links[i];
                let item = createLinkElement(link);
                linkGrid.appendChild(item);
            }
        </script>
    </body>
</html>
